{% extends "base.html" %}

{% block title %}Manager Dashboard{% endblock %}

{% block content %}
<h2>Welcome, Manager {{ user.username }}!</h2>
<h3>🏢 Branch: {{ user.branch }}</h3>

<div class="dashboard-container">
    <section>
        <h3>📌 Manage Jobs for {{ user.branch }}</h3>
        <ul class="job-list">
            {% for job in jobs %}
                {% if job.branch == user.branch %}
                    <li>
                        🚙 {{ job.description }}  
                        <button onclick="editJob('{{ job.id }}')">✏ Edit</button>
                        <button onclick="cancelJob('{{ job.id }}')">❌ Cancel</button>
                    </li>
                {% else %}
                    <li>🚙 (Other Branch) {{ job.description }}</li>
                {% endif %}
            {% endfor %}
        </ul>
    </section>

    <section>
        <h3>➕ Post a New Job</h3>
        <form action="#" method="POST">
            <input type="text" name="description" placeholder="Job Description" required>
            <input type="submit" value="Post Job">
        </form>
    </section>
</div>

<script>
    function editJob(jobId) {
        alert("Edit Job: " + jobId);
    }

    function cancelJob(jobId) {
        if (confirm("Are you sure you want to cancel this job?")) {
            alert("Job " + jobId + " canceled.");
            // Server request to cancel job goes here
        }
    }
</script>

{% endblock %}
